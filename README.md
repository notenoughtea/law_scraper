# Law Scraper - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö –∞–∫—Ç–æ–≤

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫–∞–Ω–µ—Ä –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö –∞–∫—Ç–æ–≤ —Å https://regulation.gov.ru —Å –ø–æ–∏—Å–∫–æ–º –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º –∏ –æ—Ç–ø—Ä–∞–≤–∫–æ–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
# API –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
API_URL=https://regulation.gov.ru/api/public/PublicProjects/GetPublicProjects

# –ü—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º —Ö—Ä–∞–Ω–µ–Ω–∏—è
PAGES_STORAGE=./data/pages.json
MATCHED_DIR=./data/matched

# –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é, —Ä–µ–≥–∏—Å—Ç—Ä –Ω–µ –≤–∞–∂–µ–Ω)
KEYWORDS=—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç,–∫–æ–Ω—Ü–µ—Å—Å–∏–∏,–∑–∞–∫—É–ø–∫–∏

# Telegram –±–æ—Ç (—Å–º. TELEGRAM_SETUP.md)
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather
TELEGRAM_CHAT_ID=–≤–∞—à_chat_id

# –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ (—Ñ–æ—Ä–º–∞—Ç cron)
CRON_SCHEDULE=0 9 * * *

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
RUN_ON_START=true
```

üìñ **–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Telegram**: —Å–º. [TELEGRAM_SETUP.md](TELEGRAM_SETUP.md)

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd scraper
go mod download
```

### 3. –ó–∞–ø—É—Å–∫

#### –í–∞—Ä–∏–∞–Ω—Ç A: –†–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫ (–¥–ª—è —Ç–µ—Å—Ç–∞)
```bash
cd scraper
go run cmd/scraper/main.go
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ó–∞–ø—É—Å–∫ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
```bash
cd scraper
go run cmd/cron/main.go
```

#### –í–∞—Ä–∏–∞–Ω—Ç C: –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
```bash
cd scraper
go build -o ../bin/cron cmd/cron/main.go
cd ..
./bin/cron
```

#### –í–∞—Ä–∏–∞–Ω—Ç D: Docker Compose
```bash
docker-compose up -d
docker-compose logs -f  # –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```

## üìã –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: –°–∫—Ä–∞–ø–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ—Ç RSS-–ª–µ–Ω—Ç—É —Å regulation.gov.ru
2. **–ü–æ–∏—Å–∫**: –ò—â–µ—Ç –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –Ω–∞–π–¥–µ–Ω–Ω—ã–µ URL –≤ `data/matched/file_urls.txt`
4. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–∞–∂–¥—É—é –Ω–∞–π–¥–µ–Ω–Ω—É—é —Å—Å—ã–ª–∫—É –≤ Telegram

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
law_scraper/
‚îú‚îÄ‚îÄ scraper/
‚îÇ   ‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ scraper/main.go    # –†–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ cron/main.go       # –ó–∞–ø—É—Å–∫ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
‚îÇ   ‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ clients/           # HTTP –∫–ª–∏–µ–Ω—Ç—ã (RSS, API, Telegram)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ .env
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ service/           # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (scanner, notifier)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repository/        # –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logger/            # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ go.mod
‚îÇ   ‚îî‚îÄ‚îÄ go.sum
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ matched/
‚îÇ       ‚îî‚îÄ‚îÄ file_urls.txt      # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞
‚îú‚îÄ‚îÄ .env                       # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–Ω–µ –≤ git)
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ TELEGRAM_SETUP.md          # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ Telegram
‚îî‚îÄ‚îÄ README.md
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –§–æ—Ä–º–∞—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (CRON_SCHEDULE)

| –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|----------|
| `0 9 * * *` | –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00 |
| `0 */6 * * *` | –ö–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤ |
| `0 8,20 * * *` | –í 8:00 –∏ 20:00 |
| `0 9 * * 1-5` | –í 9:00 –ø–æ —Ä–∞–±–æ—á–∏–º –¥–Ω—è–º |
| `*/30 * * * *` | –ö–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç |

### –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞

- –£–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é
- –†–µ–≥–∏—Å—Ç—Ä –Ω–µ –≤–∞–∂–µ–Ω (–ø–æ–∏—Å–∫ –≤ –Ω–∏–∂–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ)
- –ü—Ä–∏–º–µ—Ä—ã: `—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç`, `–∫–æ–Ω—Ü–µ—Å—Å–∏–∏`, `–≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–∫—É–ø–∫–∏`

## üì® –§–æ—Ä–º–∞—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

Telegram-–±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ:

```
üîç –ù–∞–π–¥–µ–Ω–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ

üìÑ –§–∞–π–ª: [–°—Å—ã–ª–∫–∞ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç]
üîë –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç, –∫–æ–Ω—Ü–µ—Å—Å–∏–∏
```

## üõ† –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°–±–æ—Ä–∫–∞ –≤—Å–µ—Ö –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤
```bash
cd scraper
go build -o ../bin/scraper cmd/scraper/main.go
go build -o ../bin/cron cmd/cron/main.go
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
cd scraper
go test ./...
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
# –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —á–µ—Ä–µ–∑ docker-compose
docker-compose logs -f

# –ü—Ä–∏ —Ä—É—á–Ω–æ–º –∑–∞–ø—É—Å–∫–µ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ª–æ–≥–æ–≤
./bin/cron 2>&1 | tee logs/cron.log
```

## üê≥ Docker

### –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
```bash
docker build -t law-scraper .
```

### –ó–∞–ø—É—Å–∫
```bash
docker-compose up -d
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
docker-compose down
```

## üìù –°–∏—Å—Ç–µ–º–Ω—ã–π —Å–µ—Ä–≤–∏—Å (Linux)

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã —Å–º. —Ä–∞–∑–¥–µ–ª 8 –≤ [TELEGRAM_SETUP.md](TELEGRAM_SETUP.md)

## üîç –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

- PDF
- DOCX (Microsoft Word)
- TXT
- DOC (—Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç Word)

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Go 1.24+
- –î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
- Telegram –±–æ—Ç —Ç–æ–∫–µ–Ω

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## ü§ù –ö–æ–Ω—Ç—Ä–∏–±—É—Ü–∏—è

Pull requests –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è!

