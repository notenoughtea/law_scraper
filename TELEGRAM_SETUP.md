# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ –∫—Ä–æ–Ω-–∑–∞–¥–∞—á–∏

## 1. –°–æ–∑–¥–∞–Ω–∏–µ Telegram –±–æ—Ç–∞

1. –ù–∞–π–¥–∏—Ç–µ –≤ Telegram –±–æ—Ç–∞ [@BotFather](https://t.me/BotFather)
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newbot`
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ (–≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ `123456789:ABCdefGHIjklMNOpqrsTUVwxyz`)

## 2. –ü–æ–ª—É—á–µ–Ω–∏–µ Chat ID

### –î–ª—è –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π:
1. –ù–∞–π–¥–∏—Ç–µ –≤ Telegram –±–æ—Ç–∞ [@userinfobot](https://t.me/userinfobot)
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–º—É –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à Chat ID (—á–∏—Å–ª–æ)

### –î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ –≥—Ä—É–ø–ø—É:
1. –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø—É
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É
3. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `https://api.telegram.org/bot<–í–ê–®_–¢–û–ö–ï–ù>/getUpdates`
4. –ù–∞–π–¥–∏—Ç–µ –≤ –æ—Ç–≤–µ—Ç–µ `"chat":{"id":-1234567890}` - —ç—Ç–æ Chat ID –≥—Ä—É–ø–ø—ã

## 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ —Ñ–∞–π–ª `.env` —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```bash
# API –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
API_URL=https://regulation.gov.ru/api/public/PublicProjects/GetPublicProjects

# –ü—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º —Ö—Ä–∞–Ω–µ–Ω–∏—è
PAGES_STORAGE=./data/pages.json
MATCHED_DIR=./data/matched

# –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
KEYWORDS=—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç,–∫–æ–Ω—Ü–µ—Å—Å–∏–∏,–∑–∞–∫—É–ø–∫–∏

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram –±–æ—Ç–∞
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
TELEGRAM_CHAT_ID=–≤–∞—à_chat_id

# –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ cron (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 9:00 –∫–∞–∂–¥—ã–π –¥–µ–Ω—å)
# –§–æ—Ä–º–∞—Ç: –º–∏–Ω—É—Ç–∞ —á–∞—Å –¥–µ–Ω—å –º–µ—Å—è—Ü –¥–µ–Ω—å_–Ω–µ–¥–µ–ª–∏
# –ü—Ä–∏–º–µ—Ä—ã:
#   0 9 * * *    - –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00
#   0 */6 * * *  - –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤
#   0 8,20 * * * - –≤ 8:00 –∏ 20:00 –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
CRON_SCHEDULE=0 9 * * *

# –ó–∞–ø—É—Å–∫–∞—Ç—å –ª–∏ –∑–∞–¥–∞—á—É —Å—Ä–∞–∑—É –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ (true/false)
RUN_ON_START=true
```

## 4. –ó–∞–ø—É—Å–∫

### –†–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫ (–¥–ª—è —Ç–µ—Å—Ç–∞):
```bash
cd scraper
go run cmd/scraper/main.go
```

### –ó–∞–ø—É—Å–∫ –∫—Ä–æ–Ω-–∑–∞–¥–∞—á–∏ (—Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é):
```bash
cd scraper
go run cmd/cron/main.go
```

### –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫:
```bash
cd scraper
go build -o ../bin/scraper cmd/scraper/main.go
go build -o ../bin/cron cmd/cron/main.go

# –ó–∞–ø—É—Å–∫
../bin/cron
```

## 5. –§–æ—Ä–º–∞—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–ë–æ—Ç –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ:

```
üîç –ù–∞–π–¥–µ–Ω–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ

üìÑ –§–∞–π–ª: [–°—Å—ã–ª–∫–∞ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç]
üîë –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç, –∫–æ–Ω—Ü–µ—Å—Å–∏–∏
```

## 6. –ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π

| –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|----------|
| `0 9 * * *` | –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00 |
| `0 */6 * * *` | –ö–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤ |
| `0 8,20 * * *` | –í 8:00 –∏ 20:00 –∫–∞–∂–¥—ã–π –¥–µ–Ω—å |
| `0 9 * * 1-5` | –í 9:00 –ø–æ —Ä–∞–±–æ—á–∏–º –¥–Ω—è–º |
| `*/30 * * * *` | –ö–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç |

## 7. –õ–æ–≥–∏

–í—Å–µ –ª–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å. –î–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª:

```bash
../bin/cron >> logs/cron.log 2>&1
```

## 8. Systemd —Å–µ—Ä–≤–∏—Å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `/etc/systemd/system/law-scraper.service`:

```ini
[Unit]
Description=Law Scraper Cron Service
After=network.target

[Service]
Type=simple
User=your_user
WorkingDirectory=/path/to/law_scraper
ExecStart=/path/to/law_scraper/bin/cron
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

–ó–∞–ø—É—Å–∫:
```bash
sudo systemctl enable law-scraper
sudo systemctl start law-scraper
sudo systemctl status law-scraper
```

